{% extends "base.html" %}
{% load i18n %}
{% load stats_extras %}

{% block title %}{% trans "GNOME Contributor" %}{% endblock %}

{% block content %}
<div class="mainpage">
  <h2>{{ person.name }}</h2>
  {% if user.is_authenticated %}
  {% ifequal user.username person.username %}
  <div class="right_actions">
    <ul>
      <li><a href="{% url person_edit slug=person.username %}">{% trans "Change your details" %}</a></li>
      <li><a href="{% url password-change-view %}">{% trans "Change your password" %}</a></li>
    </ul>
  </div>
  {% endifequal %}
  {% endif %}

  {% if profile_form %}
    <div class="maintainer">
    <form action="." method="POST" class="djform">
      <table>{{ profile_form.as_table }}
        <tr><td colspan="2" align="center"><input type="submit" value="{% trans "Save" %}"></td></tr>
      </table>
        <input type="hidden" name="edit_profile_form" value="1" />
    </form>
    </div>
  {% else %}
    {% include "person_base.html" %}
  {% endif %}
  
  <div class="maintainer">
  {% if person.maintains_modules.all %}
      <h2>{% trans "Maintains:" %}</h2>
      <ul>
        {% for module in person.maintains_modules.all %}
        <li><a href="{{ module.get_absolute_url }} ">{{ module.description }}</a></li>
        {% endfor %}
      </ul>
  {% endif %}

  {% if person.role_set.all %}
    <h2>{% trans "Team membership" %}</h2>
    <ul>
    {% for role in person.role_set.all %}
      {% with role.role as role_name %}
      <li>{% blocktrans with role.team|linked_with:role.team.get_description|safe as team_name %}Member of {{ team_name }} team ({{ role_name }}){% endblocktrans %}
      </li>
      {% endwith %}
    {% endfor %}
    </ul>
  {% endif %}
    
  {% if user.is_authenticated %}
    {% ifequal user.username person.username %}
      <form action="." method="POST">
      <p><em>{% trans "I would like to join the following team as 'translator':" %}</em><br />
       {{ join_form.teams }}  <input type="submit" value="{% trans "Join" %}">
       <input type="hidden" name="join_team_form" value="1" />
      </form>
    {% endifequal %}
  {% endif %}
  </div>
</div>
{% endblock %}
